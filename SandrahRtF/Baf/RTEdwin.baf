IF
OR(2)
AreaCheck("RTF070")
AreaCheck("RTF172")
Global("EdBattlIt","LOCALS",0)
THEN
RESPONSE #100
SetGlobal("EdBattlIt","LOCALS",1)
Continue()
END

IF
Global("EdBattlIt","LOCALS",1)
Global("SanRTFPlot5","GLOBAL",3)
THEN
RESPONSE #100
SetGlobal("EdBattlIt","LOCALS",2)
Continue()
END

IF
Global("SanRTFPlot5","GLOBAL",4)
Global("AdmiDefend","RTF070",1) 
!Global("EdBattlIt","LOCALS",1)
THEN
RESPONSE #100
SetGlobal("EdBattlIt","LOCALS",1)
Continue()
END

IF 
Global("EdBattlIt","LOCALS",1)
HaveSpell(CLERIC_IRONSKIN)
CheckStatLT(Myself,1,STONESKINS)
CheckStatLT(Myself,36,SPELLFAILUREPRIEST)
THEN
RESPONSE #100
SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
Spell(Myself,CLERIC_IRONSKIN)
END

IF 
Global("EdBattlIt","LOCALS",1)
HaveSpell(WIZARD_STONE_SKIN)
CheckStatLT(Myself,1,STONESKINS)
CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
RESPONSE #100
SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
Spell(Myself,WIZARD_STONE_SKIN)
END

IF 
Global("EdBattlIt","LOCALS",1)
HaveSpell(WIZARD_ARMOR)
!GlobalTimerNotExpired("GBWizArm","LOCALS")
CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
RESPONSE #100
SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
SetGlobalTimer("GBWizArm","LOCALS",NINE_HOURS)
Spell(Myself,WIZARD_ARMOR)
END

IF
Allegiance(Myself,ENEMY)
Delay(12)
THEN
RESPONSE #100
SetGlobal("RTRedWiToggle","LOCALS",0)
ChangeEnemyAlly(Myself,NEUTRAL)
END

IF 
Global("EdBattlIt","LOCALS",1)
HaveSpell(WIZARD_STRENGTH)
CheckStatLT(Myself,19,STR)
CheckStatLT(Myself,50,STREXTRA)
CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
RESPONSE #100
SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
Spell(Myself,WIZARD_STRENGTH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_TRUE_SIGHT)
	Detect([EVILCUTOFF])
	OR(6)
		!See(LastSeenBy(Myself))
		See(NearestEnemyOfType([EVILCUTOFF.0.0.0.0.ILLUSIONARY]))
		StateCheck(LastAttackerOf(Myself),STATE_INVISIBLE)
		StateCheck(LastAttackerOf(Myself),STATE_IMPROVEDINVISIBILITY)
		StateCheck(NearestEnemyOf(Myself),STATE_MIRRORIMAGE)
		StateCheck(NearestEnemyOf(Myself),STATE_BLUR)
	!HPLT(LastSeenBy(Myself),1)
	CheckStat(Myself,0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBClrTrueSght","LOCALS",TWELVE_MINUTES)
		Spell(Myself,CLERIC_TRUE_SIGHT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_SIGHT)
	Detect([EVILCUTOFF])
	OR(6)
		!See(LastSeenBy(Myself))
		See(NearestEnemyOfType([EVILCUTOFF.0.0.0.0.ILLUSIONARY]))
		StateCheck(LastAttackerOf(Myself),STATE_INVISIBLE)
		StateCheck(LastAttackerOf(Myself),STATE_IMPROVEDINVISIBILITY)
		StateCheck(NearestEnemyOf(Myself),STATE_MIRRORIMAGE)
		StateCheck(NearestEnemyOf(Myself),STATE_BLUR)
	!HPLT(LastSeenBy(Myself),1)
	!GlobalTimerNotExpired("GBWizTrueSght","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBWizTrueSght","LOCALS",TWELVE_MINUTES)
		Spell(Myself,WIZARD_TRUE_SIGHT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player1,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player2,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player3,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player4,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player5,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player6,STATE_POISONED)
	HaveSpell(CLERIC_SLOW_POISON)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_SLOW_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player1,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player2,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player3,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player4,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player5,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player6,STATE_POISONED)
	HaveSpell(CLERIC_NEUTRALIZE_POISON)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_NEUTRALIZE_POISON)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player1,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player1)
	!HasBounceEffects(Player1)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player1,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player2,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player2)
	!HasBounceEffects(Player2)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player2,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player3,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player3)
	!HasBounceEffects(Player3)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player3,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player4,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player4)
	!HasBounceEffects(Player4)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player4,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player5,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player5)
	!HasBounceEffects(Player5)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player5,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CheckStatGT(Player6,0,EXTRAPROFICIENCY20)
	CombatCounter(0)
	HaveSpell(CLERIC_LESSER_RESTORATION)
	See(Player6)
	!HasBounceEffects(Player6)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(Player6,CLERIC_LESSER_RESTORATION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CombatCounter(0)
	CheckStatGT(Myself,0,EXTRAPROFICIENCY20)
	HasItemEquiped("restore",Myself) // Genesung
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("restore",Myself) // Genesung
END

IF 
Global("EdBattlIt","LOCALS",1)
	!Global("GBHealInProgress","GLOBAL",0)
	!GlobalTimerNotExpired("GBHealingNow","GLOBAL")
THEN
	RESPONSE #100
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	RandomNum(10,1)
	CombatCounter(0)
	HPPercentLT(MostDamagedOf,50)
	HaveSpell(CLERIC_HEAL)
	See(MostDamagedOf)
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_HEAL)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	RandomNum(10,1)
	CombatCounter(0)
	HPPercentLT(MostDamagedOf,50)
	HaveSpell(CLERIC_RESURRECTION)
	See(MostDamagedOf)
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_RESURRECTION)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	RandomNum(10,1)
	ActionListEmpty()
	CombatCounter(0)
	HPPercentLT(MostDamagedOf,60)
	HaveSpell(CLERIC_CURE_CRITICAL_WOUNDS)
	See(MostDamagedOf(Myself))
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_CURE_CRITICAL_WOUNDS)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	RandomNum(10,1)
	ActionListEmpty()
	CombatCounter(0)
	HPPercentLT(MostDamagedOf,70)
	HaveSpell(CLERIC_CURE_SERIOUS_WOUNDS)
	See(MostDamagedOf(Myself))
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_CURE_SERIOUS_WOUNDS)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	RandomNum(10,1)
	CombatCounter(0)
	HPPercentLT(MostDamagedOf,80)
	HaveSpell(CLERIC_CURE_MEDIUM_WOUNDS)
	See(MostDamagedOf)
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_CURE_MEDIUM_WOUNDS)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	RandomNum(10,1)
	CombatCounter(0)
	HPPercentLT(MostDamagedOf(Myself),90)
	HaveSpell(CLERIC_CURE_LIGHT_WOUNDS)
	See(MostDamagedOf)
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	Global("GBHealInProgress","GLOBAL",0)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		SetGlobalTimer("GBHealingNow","GLOBAL",SIX_MINUTES)
		SetGlobal("GBHealInProgress","GLOBAL",1)
		Spell(MostDamagedOf,CLERIC_CURE_LIGHT_WOUNDS)
		SetGlobal("GBHealInProgress","GLOBAL",0)
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],POISONED_200)
	HaveSpell(CLERIC_RESURRECTION)
	!HasBounceEffects(LastHeardBy(Myself))
	!StateCheck(LastHeardBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastHeardBy(Myself),STATE_IMPROVEDINVISIBILITY)
	InParty(LastHeardBy(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		Spell(LastHeardBy(Myself),CLERIC_RESURRECTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],POISONED_200)
	HaveSpell(CLERIC_HEAL)
	!HasBounceEffects(LastHeardBy(Myself))
	!StateCheck(LastHeardBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastHeardBy(Myself),STATE_IMPROVEDINVISIBILITY)
	InParty(LastHeardBy(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		Spell(LastHeardBy(Myself),CLERIC_HEAL)
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],POISONED_200)
	HaveSpell(CLERIC_CURE_CRITICAL_WOUNDS)
	!HasBounceEffects(LastHeardBy(Myself))
	!StateCheck(LastHeardBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastHeardBy(Myself),STATE_IMPROVEDINVISIBILITY)
	InParty(LastHeardBy(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		Spell(LastHeardBy(Myself),CLERIC_CURE_CRITICAL_WOUNDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],POISONED_200)
	HaveSpell(CLERIC_CURE_SERIOUS_WOUNDS)
	!HasBounceEffects(LastHeardBy(Myself))
	!StateCheck(LastHeardBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastHeardBy(Myself),STATE_IMPROVEDINVISIBILITY)
	InParty(LastHeardBy(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		MakeUnselectable(2)
		Spell(LastHeardBy(Myself),CLERIC_CURE_SERIOUS_WOUNDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player1Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player1Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player2Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player2Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player3Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player3Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player4Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player4Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player5Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player5Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Player6Fill,20)
	HasItemEquiped("Rods03",Myself)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("Rods03",Player6Fill)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	CombatCounter(0)
	HaveSpell(CLERIC_AID)
	See(MostDamagedOf)
	!StateCheck(LastSeenBy(Myself),STATE_AID)
	!HasBounceEffects(MostDamagedOf)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(MostDamagedOf,CLERIC_AID)
END

IF 
Global("EdBattlIt","LOCALS",1)
	SpellCastOnMe([ANYTHING],CLERIC_PROTECT_FROM_EVIL)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	SpellCastOnMe([ANYTHING],WIZARD_PROTECTION_FROM_EVIL)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],201)
	Range(LastHeardBy(Myself),10)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",TWO_HOURS)
END

IF
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	GlobalTimerNotExpired("GBHalf","LOCALS")
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	Global("GBAmmoless","LOCALS",0)
	!HasItemSlot(Myself,SLOT_MISC19)
	HasItemSlot(Myself,SLOT_WEAPON)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		SelectWeaponAbility(SLOT_WEAPON,0)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	GlobalTimerNotExpired("GBHalf","LOCALS")
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	OR(3)
		!HasItemSlot(Myself,SLOT_WEAPON)
		HasItemSlot(Myself,SLOT_MISC19)
		Global("GBAmmoless","LOCALS",1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	GlobalTimerNotExpired("GBHalf","LOCALS")
	OR(3)
		See(NearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!Range(LastAttackerOf(Myself),8)
	Global("GBAmmoless","LOCALS",0)
	!HasItemSlot(Myself,SLOT_MISC19)
	HasItemSlot(Myself,SLOT_WEAPON1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		SelectWeaponAbility(SLOT_WEAPON1,0)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	GlobalTimerNotExpired("GBHalf","LOCALS")
	OR(3)
		See(NearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!Range(LastAttackerOf(Myself),8)
	OR(3)
		!HasItemSlot(Myself,SLOT_WEAPON1)
		HasItemSlot(Myself,SLOT_MISC19)
		Global("GBAmmoless","LOCALS",1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	Heard([GOODCUTOFF],203)
	!See(NearestEnemyOf(Myself))
THEN
	RESPONSE #500
		MoveToObject(LastHeardBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_RESTORATION)
	OR(5)
		HPPercentLT(Player1,30)
		HPPercentLT(Player2,30)
		HPPercentLT(Player3,30)
		HPPercentLT(Player4,30)
		HPPercentLT(Player5,30)
	OR(5)
		HPPercentLT(Player1,30)
		HPPercentLT(Player2,30)
		HPPercentLT(Player3,30)
		HPPercentLT(Player4,30)
		HPPercentLT(Player6,30)
	OR(5)
		HPPercentLT(Player1,30)
		HPPercentLT(Player2,30)
		HPPercentLT(Player3,30)
		HPPercentLT(Player5,30)
		HPPercentLT(Player6,30)
	OR(5)
		HPPercentLT(Player1,30)
		HPPercentLT(Player2,30)
		HPPercentLT(Player4,30)
		HPPercentLT(Player5,30)
		HPPercentLT(Player6,30)
	OR(5)
		HPPercentLT(Player1,30)
		HPPercentLT(Player3,30)
		HPPercentLT(Player4,30)
		HPPercentLT(Player5,30)
		HPPercentLT(Player6,30)
	OR(5)
		HPPercentLT(Player2,30)
		HPPercentLT(Player3,30)
		HPPercentLT(Player4,30)
		HPPercentLT(Player5,30)
		HPPercentLT(Player6,30)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_RESTORATION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(MostDamagedOf(Myself),30)
	HaveSpell(CLERIC_RESURRECTION)
	!StateCheck(MostDamagedOf,STATE_INVISIBLE)
	!StateCheck(MostDamagedOf,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(MostDamagedOf(Myself),CLERIC_RESURRECTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DEATH_SPELL)
	See(NearestEnemyOfType([0.0.0.OGRE_MAGE]))
	Gender(LastSeenBy(Myself),SUMMONED)
	HasItemEquiped("NISHRUU",LastSeenBy(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DEATH_SPELL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_VOCALIZE)
	StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_VOCALIZE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MASS_INVISIBILITY)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		Spell(Myself,WIZARD_MASS_INVISIBILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("SCRL8W",Myself)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("SCRL8W",Myself)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SHADOW_DOOR)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		Spell(Myself,WIZARD_SHADOW_DOOR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("SCRL2H",Myself)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("SCRL2H",Myself) // Phantomtor
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_INVISIBILITY)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		Spell(Myself,WIZARD_IMPROVED_INVISIBILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("SCRL1Y",Myself) // Verbesserte Unsichtbarkeit
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("SCRL1Y",Myself)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_INVISIBILITY_10_FOOT)
	See(NearestEnemyOf(Myself))
	HPPercentLT(Myself,50)
	!StateCheck(Myself,STATE_INVISIBLE)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		Spell(Myself,WIZARD_INVISIBILITY_10_FOOT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("SCRL1J",Myself)
	See(NearestEnemyOf(Myself))
	HPPercentLT(Myself,50)
	!StateCheck(Myself,STATE_INVISIBLE)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("SCRL1J",Myself)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_INVISIBILITY)
	HPPercentLT(Myself,50)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_INVISIBLE)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_INVISIBILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("SCRL90",Myself) // Unsichtbarkeit
	HPPercentLT(Myself,50)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_INVISIBLE)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("SCRL90",Myself) // Unsichtbarkeit
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SANCTUARY)
	HPPercentLT(Myself,50)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_INVISIBLE)
	CheckStatLT(Myself,1,SANCTUARY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_SANCTUARY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_PIXIE_DUST)
	HPPercentLT(Myself,50)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_INVISIBLE)
	!CheckStatGT(LastSeenBy(Myself),0,SEEINVISIBLE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBInvis","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBInvis","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_PIXIE_DUST)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Myself,75)
	HasItemEquiped("POTN55",Myself) // Extrastarker Heiltrank
	!GlobalTimerNotExpired("GBUsedHealPotion","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("POTN55",Myself) // Extrastarker Heiltrank
		SetGlobalTimer("GBUsedHealPotion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Myself,50)
	HasItemEquiped("POTN55",Myself) // Extrastarker Heiltrank
THEN
	RESPONSE #100
		ActionOverride(Myself,UseItem("POTN55",Myself)) // Extrastarker Heiltrank
		SetGlobalTimer("GBUsedHealPotion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Myself,75)
	HasItemEquiped("POTN52",Myself) // Konzentrierter Heiltrank
	!GlobalTimerNotExpired("GBUsedHealPotion","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("POTN52",Myself) // Konzentrierter Heiltrank
		SetGlobalTimer("GBUsedHealPotion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Myself,50)
	HasItemEquiped("POTN52",Myself) // Konzentrierter Heiltrank
THEN
	RESPONSE #100
		ActionOverride(Myself,UseItem("POTN52",Myself)) // Konzentrierter Heiltrank
		SetGlobalTimer("GBUsedHealPotion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PIERCE_SHIELD)
	See(NearestEnemyOf(Myself))
	CheckStatGT(LastSeenBy(Myself),25,RESISTMAGIC)
	HPPercentGT(LastSeenBy(Myself),25)
	!HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_PIERCE_SHIELD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PIERCE_MAGIC)
	See(NearestEnemyOf(Myself))
	CheckStatGT(LastSeenBy(Myself),25,RESISTMAGIC)
	HPPercentGT(LastSeenBy(Myself),25)
	!HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_PIERCE_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_LOWER_RESISTANCE)
	See(NearestEnemyOf(Myself))
	CheckStatGT(LastSeenBy(Myself),25,RESISTMAGIC)
	HPPercentGT(LastSeenBy(Myself),25)
	!HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_LOWER_RESISTANCE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BREACH)
	See(NearestEnemyOf(Myself))
	OR(3)
		HasItemEquiped("marili",LastSeenBy(Myself)) // Flammenschwert +1
		Race(LastSeenBy(Myself),DRAGON)
		Race(LastSeenBy(Myself),LICH)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBWizBreach","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizBreach","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BREACH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("WAND18",Myself) // Wand of Spell Striking
	See(NearestEnemyOf(Myself))
	OR(3)
		HasItemEquiped("marili",LastSeenBy(Myself)) // Flammenschwert +1
		Race(LastSeenBy(Myself),DRAGON)
		Race(LastSeenBy(Myself),LICH)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBWizBreach","LOCALS")
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("WAND18",LastSeenBy(Myself)) // Wand of Spell Striking
		SetGlobalTimer("GBWizBreach","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_MASS_CURE)
	!StateCheck(MostDamagedOf(Myself),STATE_INVISIBLE)
	!StateCheck(MostDamagedOf(Myself),STATE_IMPROVEDINVISIBILITY)
	OR(5)
		HPPercentLT(Player1,85)
		HPPercentLT(Player2,85)
		HPPercentLT(Player3,85)
		HPPercentLT(Player4,85)
		HPPercentLT(Player5,85)
	OR(5)
		HPPercentLT(Player1,85)
		HPPercentLT(Player2,85)
		HPPercentLT(Player3,85)
		HPPercentLT(Player4,85)
		HPPercentLT(Player6,85)
	OR(5)
		HPPercentLT(Player1,85)
		HPPercentLT(Player2,85)
		HPPercentLT(Player3,85)
		HPPercentLT(Player5,85)
		HPPercentLT(Player6,85)
	OR(5)
		HPPercentLT(Player1,85)
		HPPercentLT(Player2,85)
		HPPercentLT(Player4,85)
		HPPercentLT(Player5,85)
		HPPercentLT(Player6,85)
	OR(5)
		HPPercentLT(Player1,85)
		HPPercentLT(Player3,85)
		HPPercentLT(Player4,85)
		HPPercentLT(Player5,85)
		HPPercentLT(Player6,85)
	OR(5)
		HPPercentLT(Player2,85)
		HPPercentLT(Player3,85)
		HPPercentLT(Player4,85)
		HPPercentLT(Player5,85)
		HPPercentLT(Player6,85)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(MostDamagedOf(Myself),CLERIC_MASS_CURE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player1,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_REMOVE_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player2,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_REMOVE_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player3,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Player3,CLERIC_REMOVE_FEAR)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player4,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_REMOVE_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player5,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_REMOVE_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Player6,STATE_PANIC)
	HaveSpell(CLERIC_REMOVE_FEAR)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_REMOVE_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player1,0,HELD)
		StateCheck(Player1,STATE_HELPLESS)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player2,0,HELD)
		StateCheck(Player2,STATE_HELPLESS)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player3,0,HELD)
		StateCheck(Player3,STATE_HELPLESS)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player4,0,HELD)
		StateCheck(Player4,STATE_HELPLESS)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player5,0,HELD)
		StateCheck(Player5,STATE_HELPLESS)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REMOVE_PARALYSIS)
	OR(2)
		CheckStatGT(Player6,0,HELD)
		StateCheck(Player6,STATE_HELPLESS)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_REMOVE_PARALYSIS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player1,0,HELD)
		CheckStatGT(Player1,0,ENTANGLE)
		CheckStatGT(Player1,0,GREASE)
		CheckStatGT(Player1,0,WEB)
		StateCheck(Player1,STATE_SLOWED)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player2,0,HELD)
		CheckStatGT(Player2,0,ENTANGLE)
		CheckStatGT(Player2,0,GREASE)
		CheckStatGT(Player2,0,WEB)
		StateCheck(Player2,STATE_SLOWED)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player3,0,HELD)
		CheckStatGT(Player3,0,ENTANGLE)
		CheckStatGT(Player3,0,GREASE)
		CheckStatGT(Player3,0,WEB)
		StateCheck(Player3,STATE_SLOWED)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player4,0,HELD)
		CheckStatGT(Player4,0,ENTANGLE)
		CheckStatGT(Player4,0,GREASE)
		CheckStatGT(Player4,0,WEB)
		StateCheck(Player4,STATE_SLOWED)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player5,0,HELD)
		CheckStatGT(Player5,0,ENTANGLE)
		CheckStatGT(Player5,0,GREASE)
		CheckStatGT(Player5,0,WEB)
		StateCheck(Player5,STATE_SLOWED)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FREE_ACTION)
	OR(5)
		CheckStatGT(Player6,0,HELD)
		CheckStatGT(Player6,0,ENTANGLE)
		CheckStatGT(Player6,0,GREASE)
		CheckStatGT(Player6,0,WEB)
		StateCheck(Player6,STATE_SLOWED)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_FREE_ACTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player1,0,HELD)
		CheckStatGT(Player1,0,ENTANGLE)
		CheckStatGT(Player1,0,GREASE)
		CheckStatGT(Player1,0,WEB)
		StateCheck(Player1,STATE_HELPLESS)
		StateCheck(Player1,STATE_STUNNED)
		StateCheck(Player1,STATE_PANIC)
		StateCheck(Player1,STATE_SLEEPING)
		StateCheck(Player1,STATE_SILENCED)
		StateCheck(Player1,STATE_CHARMED)
		StateCheck(Player1,STATE_SLOWED)
		StateCheck(Player1,STATE_BLIND)
		StateCheck(Player1,STATE_CONFUSED)
	See(Player1)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player2,0,HELD)
		CheckStatGT(Player2,0,ENTANGLE)
		CheckStatGT(Player2,0,GREASE)
		CheckStatGT(Player2,0,WEB)
		StateCheck(Player2,STATE_HELPLESS)
		StateCheck(Player2,STATE_STUNNED)
		StateCheck(Player2,STATE_PANIC)
		StateCheck(Player2,STATE_SLEEPING)
		StateCheck(Player2,STATE_SILENCED)
		StateCheck(Player2,STATE_CHARMED)
		StateCheck(Player2,STATE_SLOWED)
		StateCheck(Player2,STATE_BLIND)
		StateCheck(Player2,STATE_CONFUSED)
	See(Player2)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player3,0,HELD)
		CheckStatGT(Player3,0,ENTANGLE)
		CheckStatGT(Player3,0,GREASE)
		CheckStatGT(Player3,0,WEB)
		StateCheck(Player3,STATE_HELPLESS)
		StateCheck(Player3,STATE_STUNNED)
		StateCheck(Player3,STATE_PANIC)
		StateCheck(Player3,STATE_SLEEPING)
		StateCheck(Player3,STATE_SILENCED)
		StateCheck(Player3,STATE_CHARMED)
		StateCheck(Player3,STATE_SLOWED)
		StateCheck(Player3,STATE_BLIND)
		StateCheck(Player3,STATE_CONFUSED)
	See(Player3)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player4,0,HELD)
		CheckStatGT(Player4,0,ENTANGLE)
		CheckStatGT(Player4,0,GREASE)
		CheckStatGT(Player4,0,WEB)
		StateCheck(Player4,STATE_HELPLESS)
		StateCheck(Player4,STATE_STUNNED)
		StateCheck(Player4,STATE_PANIC)
		StateCheck(Player4,STATE_SLEEPING)
		StateCheck(Player4,STATE_SILENCED)
		StateCheck(Player4,STATE_CHARMED)
		StateCheck(Player4,STATE_SLOWED)
		StateCheck(Player4,STATE_BLIND)
		StateCheck(Player4,STATE_CONFUSED)
	See(Player4)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player5,0,HELD)
		CheckStatGT(Player5,0,ENTANGLE)
		CheckStatGT(Player5,0,GREASE)
		CheckStatGT(Player5,0,WEB)
		StateCheck(Player5,STATE_HELPLESS)
		StateCheck(Player5,STATE_STUNNED)
		StateCheck(Player5,STATE_PANIC)
		StateCheck(Player5,STATE_SLEEPING)
		StateCheck(Player5,STATE_SILENCED)
		StateCheck(Player5,STATE_CHARMED)
		StateCheck(Player5,STATE_SLOWED)
		StateCheck(Player5,STATE_BLIND)
		StateCheck(Player5,STATE_CONFUSED)
	See(Player5)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player6,0,HELD)
		CheckStatGT(Player6,0,ENTANGLE)
		CheckStatGT(Player6,0,GREASE)
		CheckStatGT(Player6,0,WEB)
		StateCheck(Player6,STATE_HELPLESS)
		StateCheck(Player6,STATE_STUNNED)
		StateCheck(Player6,STATE_PANIC)
		StateCheck(Player6,STATE_SLEEPING)
		StateCheck(Player6,STATE_SILENCED)
		StateCheck(Player6,STATE_CHARMED)
		StateCheck(Player6,STATE_SLOWED)
		StateCheck(Player6,STATE_BLIND)
		StateCheck(Player6,STATE_CONFUSED)
	See(Player6)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TIME_STOP)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBWizTimeStop","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizTimeStop","LOCALS",SIX_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_TIME_STOP)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_ALUCRITY)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_IMPROVED_ALUCRITY)
		SetGlobalTimer("GBWizAlacrity","LOCALS",SIX_MINUTES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPRISONMENT)
	NumCreatureVsPartyGT([EVILCUTOFF],2)
	See(NearestEnemyOf(Myself))
	See(SecondNearestEnemyOf(Myself))
	!CheckStatLT(SecondNearestEnemyOf(Myself),10000,XPVALUE)
	!GlobalTimerNotExpired("GBWizImprison","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		Spell(SecondNearestEnemyOf(Myself),WIZARD_IMPRISONMENT)
		SetGlobalTimer("GBWizImprison","LOCALS",THREE_ROUNDS)
		MoveToObject(SecondNearestEnemyOf(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FALSE_DAWN)
	See(NearestEnemyOfType([EVILCUTOFF.UNDEAD]))
	Range(LastSeenBy(Myself),8)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_FALSE_DAWN)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SUNRAY)
	See(NearestEnemyOfType([EVILCUTOFF.UNDEAD]))
	Range(LastSeenBy(Myself),8)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_SUNRAY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REPULSE_UNDEAD)
	See(NearestEnemyOfType([EVILCUTOFF.UNDEAD]))
	Range(LastSeenBy(Myself),8)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_REPULSE_UNDEAD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
	OR(6)
		See(NearestEnemyOfType([0.0.MIND_FLAYER]))
		See(NearestEnemyOfType([0.0.GITHYANKI]))
		See(NearestEnemyOfType([0.0.UMBERHULK]))
		See(NearestEnemyOfType([0.0.MIND_FLAYER]))
		See(NearestEnemyOfType([0.0.VAMPIRE]))
		See(NearestEnemyOfType([0.0.VAMPYRE]))
	!GlobalTimerNotExpired("GBClrChaoCom","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrChaoCom","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_CHAOTIC_COMMANDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DEATH_SPELL)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	OR(2)
		!CheckStatGT(LastSeenBy(Myself),8,LEVEL)
		Gender(LastSeenBy(Myself),SUMMONED)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),TROLL)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DEATH_SPELL)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HOLD_UNDEAD)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	General(LastSeenBy(Myself),UNDEAD)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HOLD_UNDEAD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	ActionListEmpty()
	HaveSpell(WIZARD_BURNING_HANDS)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BURNING_HANDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_FLAME_BLADE)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!HasItemSlot(Myself,SLOT_MISC19)
THEN
	RESPONSE #100
		Spell(LastSeenBy(Myself),CLERIC_FLAME_BLADE)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHROMATIC_ORB)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHROMATIC_ORB)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_AGANNAZAR_SCORCHER)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_AGANNAZAR_SCORCHER)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MELF_ACID_ARROW)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MELF_ACID_ARROW)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FLAME_ARROW)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FLAME_ARROW)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FLAME_STRIKE)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("TROLLDIE",LastSeenBy(Myself)) // No such index
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_FLAME_STRIKE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("MELFMET",Myself) // Melfs magische Meteoriten
THEN
	RESPONSE #100
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	See(NearestEnemyOfType([0.0.TROLL]))
	HP(LastSeenBy(Myself),1)
	HasItemEquiped("FBLADE",Myself) // Flammenklinge
THEN
	RESPONSE #100
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_STRIKE)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizSpellStrike","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSpellStrike","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SPELL_STRIKE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PIERCE_SHIELD)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizPierceShield","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizPierceShield","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_PIERCE_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_WARDING_WHIP)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizWardingWhip","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWardingWhip","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_WARDING_WHIP)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_HAKEASHAR)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_HAKEASHAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RUBY_RAY_OF_REVERSAL)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizRubyRay","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizRubyRay","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_RUBY_RAY_OF_REVERSAL)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("RODS01",Myself) // Zepter der Absorption
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizRubyRay","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("RODS01",LastSeenBy(Myself)) // Zepter der Absorption
		SetGlobalTimer("GBWizRubyRay","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_NISHRUU)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_NISHRUU)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_SILENCE)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SILENCED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_SILENCE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PIERCE_MAGIC)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizPierceMagic","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizPierceMagic","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_PIERCE_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BREACH)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizBreach","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizBreach","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BREACH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("WAND18",Myself) // Wand of Spell Striking
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizBeach","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("WAND18",LastSeenBy(Myself)) // Wand of Spell Striking
		SetGlobalTimer("GBWixBreach","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SECRET_WORD)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizSecretWord","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSecretWord","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SECRET_WORD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_THRUST)
	See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBMetaMagicAttack","LOCALS")
	!GlobalTimerNotExpired("GBWizPierceMagic","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizPierceMagic","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBMetaMagicAttack","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SPELL_THRUST)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DEAFNESS)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SILENCED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DEAFNESS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BLINDNESS)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_BLIND)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BLINDNESS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CREEPING_DOOM)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CREEPING_DOOM)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_INSECT_PLAGUE)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_INSECT_PLAGUE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SUMMON_INSECTS)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SUMMON_INSECTS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SILENCE_15_FOOT)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SILENCED)
	!Range(LastSeenBy(Myself),15)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SILENCE_15_FOOT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_MISCAST_MAGIC)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SILENCED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_MISCAST_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	OR(9)
		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		StateCheck(LastSeenBy(Myself),STATE_CHANT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
		StateCheck(LastSeenBy(Myself),STATE_LUCK)
		StateCheck(LastSeenBy(Myself),STATE_AID)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		HasBounceEffects(LastSeenBy(Myself))
	!Range(LastSeenBy(Myself),15)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	See(NearestEnemyOfType([EVILCUTOFF.UNDEAD]))
	!GlobalTimerNotExpired("GBTunrnedUndead","LOCALS")
	CheckStatGT(Myself,12,TURNUNDEADLEVEL)
	Range(LastSeenBy(Myself),8)
	!Kit(Myself,INQUISITOR)
	!Class(Myself,DRUID_ALL)
THEN
	RESPONSE #100
		SetGlobalTimer("GBAutoTurning","LOCALS",ONE_ROUND)
		SetGlobalTimer("GBTurnedUndead","LOCALS",THREE_ROUNDS)
		SetGlobal("GBTurned","LOCALS",1)
		Turn()
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_WISH)
	See(NearestEnemyOf(Myself))
	!CheckStatLT(LastSeenBy(Myself),10000,XPVALUE)
	CheckStatGT(Myself,14,WIS)
	!GlobalTimerNotExpired("GBWishTimer","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWishTimer","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_WISH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SHIELD_OF_THE_ARCHONS)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBClrShieldArchon","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrShieldArchon","LOCALS",THREE_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_SHIELD_OF_THE_ARCHONS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DEATH_WARD)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBClrDeathWard","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrDeathWard","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_DEATH_WARD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_MAGIC_RESISTANCE)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	CheckStatLT(Myself,40,RESISTMAGIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_MAGIC_RESISTANCE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_PHYSICAL_MIRROR)
	See(LastAttackerOf(Myself))
	OR(7)
		HasItemEquiped("AROW01",LastSeenBy(Myself)) // Arrows
		HasItemEquiped("AX1H04",LastSeenBy(Myself)) // Throwing Axe
		HasItemEquiped("BOLT01",LastSeenBy(Myself)) // Bolzen
		HasItemEquiped("BULL01",LastSeenBy(Myself)) // Bullet
		HasItemEquiped("DAGG05",LastSeenBy(Myself)) // Throwing Dagger
		HasItemEquiped("DART01",LastSeenBy(Myself)) // Dart
		HasItemEquiped("DWBOLT03",LastSeenBy(Myself)) // Drowcraft Bolt +3
	CheckStatLT(Myself,4,STONESKINS)
	!GlobalTimerNotExpired("GBWizProtMissiles","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizProtMissiles","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_PHYSICAL_MIRROR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_AURA_OF_FLAMING_DEATH)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	CheckStatLT(Myself,4,STONESKINS)
	Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBClrAuraDeath","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrAuraDeath","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_AURA_OF_FLAMING_DEATH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_GLOBE_OF_BLADES)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	CheckStatLT(Myself,4,STONESKINS)
	Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBClrGlobeBlade","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrGlobeBlade","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_GLOBE_OF_BLADES)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_BLADE_BARRIER)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	CheckStatLT(Myself,4,STONESKINS)
	Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBClrBladeBarrier","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrBladeBarrier","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_BLADE_BARRIER)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CLOAK_OF_FEAR)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	Range(NearestEnemyOf(Myself),8)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!GlobalTimerNotExpired("GBClrFearCloak","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrFearCloak","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_CLOAK_OF_FEAR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_REGENERATE)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBClrRegenerate","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrRegenerate","LOCALS",THREE_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_REGENERATE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_PROTECTION_FROM_EVIL_10_FOOT)
	OR(3)
		See(NearestEnemyOfType([0.0.DEMONIC]))
		Gender(NearestEnemyOf(Myself),SUMMONED)
		Alignment(NearestEnemyOf(Myself),MASK_EVIL)
	!GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_PROTECTION_FROM_EVIL_10_FOOT)
		Shout(201)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
	OR(3)
		See(NearestEnemyOfType([0.0.DEMONIC]))
		Gender(NearestEnemyOf(Myself),SUMMONED)
		Alignment(NearestEnemyOf(Myself),MASK_EVIL)
	!GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
	!HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
	!HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_PROTECT_FROM_EVIL)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DEFENSIVE_HARMONY)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBClrDefHarmony","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrDefHarmony","LOCALS",SIX_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_DEFENSIVE_HARMONY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_BLESS)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_BLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_BLESS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CHANT)
	See(NearestEnemyOf(Myself))
	!StateCheck(Myself,STATE_CHANT)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_CHANT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ARMOR_OF_FAITH)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBClrArmorFaith","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrArmorFaith","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_ARMOR_OF_FAITH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_BARKSKIN)
	See(NearestEnemyOf(Myself))
	!GlobalTimerNotExpired("GBClrBarkskin","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrBarkskin","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_BARKSKIN)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_TRAP)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatLT(LastSeenBy(Myself),2500,XPVALUE)
	!GlobalTimerNotExpired("GBWizSplTrap","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSplTrap","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SPELL_TRAP)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_ABSOLUTE_IMMUNITY)
	CheckStatLT(Myself,4,STONESKINS)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizWeapImmun","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWeapImmun","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_ABSOLUTE_IMMUNITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_THE_ELEMENTS)
	OR(5)
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
		See(TenthNearestEnemyOfType([0.0.DRAGON]))
	!GlobalTimerNotExpired("GBWizProtElements","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizProtElements","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_THE_ELEMENTS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_ENERGY)
	OR(5)
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
		See(TenthNearestEnemyOfType([0.0.DRAGON]))
	!GlobalTimerNotExpired("GBWizProtEng","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizProtEng","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_ENERGY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_MANTLE)
	CheckStatLT(Myself,4,STONESKINS)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizWeapImmun","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWeapImmun","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_IMPROVED_MANTLE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_TURNING)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizSplTurn","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSplTurn","LOCALS",THREE_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SPELL_TURNING)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MANTLE)
	CheckStatLT(Myself,4,STONESKINS)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizWeapImmun","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWeapImmun","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MANTLE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_DEFLECTION)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizSplDeflect","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSplDeflect","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SPELL_DEFLECTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)
	CheckStatLT(Myself,4,STONESKINS)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizWeapImmun","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWeapImmun","LOCALS",FOUR_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_MAGIC_ENERGY)
	OR(5)
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
		See(TenthNearestEnemyOfType([0.0.DRAGON]))
	!GlobalTimerNotExpired("GBWizProtMagEng","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizProtMagEng","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_MAGIC_ENERGY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GLOBE_OF_INVULNERABILITY)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizGlbInvln","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizGlbInvln","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_GLOBE_OF_INVULNERABILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_NORMAL_WEAPONS)
	CheckStatLT(Myself,4,STONESKINS)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizWeapImmun","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizWeapImmun","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_NORMAL_WEAPONS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MINOR_SPELL_TURNING)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizMinSplTurn","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizMinSplTurn","LOCALS",THREE_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MINOR_SPELL_TURNING)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_IMMUNITY)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
		See(NearestEnemyOfType([0.0.BEHOLDER]))
		See(NearestEnemyOfType([0.0.DEMILICH]))
	!GlobalTimerNotExpired("GBSpellImmune","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetInterrupt(FALSE)
		UnhideGUI()
		PauseGame()
		SetGlobalTimer("GBSpellImmune","LOCALS",EIGHTEEN_MINUTES)
		Spell(Myself,WIZARD_SPELL_IMMUNITY)
		PauseGame()
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPELL_IMMUNITY)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
		See(NearestEnemyOfType([0.0.BEHOLDER]))
		See(NearestEnemyOfType([0.0.DEMILICH]))
	GlobalTimerNotExpired("GBSpellImmune","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SetInterrupt(FALSE)
		UnhideGUI()
		PauseGame()
		SetGlobalTimer("GBSpellImmune","LOCALS",EIGHTEEN_MINUTES)
		Spell(Myself,WIZARD_SPELL_IMMUNITY)
		PauseGame()
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPIRIT_ARMOR)
	See(NearestEnemyOf(Myself))
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizSprtArmor","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizSprtArmor","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SPIRIT_ARMOR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MINOR_GLOBE_OF_INVULNERABILITY)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizMinGlbInvl","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizMinGlbInvl","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MINOR_GLOBE_OF_INVULNERABILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_INVISIBILITY)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(Myself,STATE_INVISIBLE)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_IMPROVED_INVISIBILITY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FIRE_SHIELD_RED)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizRedShld","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizRedShld","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_FIRE_SHIELD_RED)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FIRE_SHIELD_BLUE)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizBlueShld","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizBlueShld","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_FIRE_SHIELD_BLUE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MINOR_SPELL_DEFLECTION)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!GlobalTimerNotExpired("GBWizMinSplDef","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizMinSplDef","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MINOR_SPELL_DEFLECTION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HASTE)
	See(NearestEnemyOf(Myself))
	CheckStatLT(Myself,2,FATIGUE)
	!StateCheck(Myself,STATE_HASTED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GHOST_ARMOR)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizGhstArm","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizGhstArm","LOCALS",TWO_HOURS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_GHOST_ARMOR)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player1,0,HELD)
		CheckStatGT(Player1,0,ENTANGLE)
		CheckStatGT(Player1,0,GREASE)
		CheckStatGT(Player1,0,WEB)
		StateCheck(Player1,STATE_HELPLESS)
		StateCheck(Player1,STATE_STUNNED)
		StateCheck(Player1,STATE_PANIC)
		StateCheck(Player1,STATE_SLEEPING)
		StateCheck(Player1,STATE_SILENCED)
		StateCheck(Player1,STATE_CHARMED)
		StateCheck(Player1,STATE_SLOWED)
		StateCheck(Player1,STATE_BLIND)
		StateCheck(Player1,STATE_CONFUSED)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	See(Player1)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,WIZARD_TRUE_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player2,0,HELD)
		CheckStatGT(Player2,0,ENTANGLE)
		CheckStatGT(Player2,0,GREASE)
		CheckStatGT(Player2,0,WEB)
		StateCheck(Player2,STATE_HELPLESS)
		StateCheck(Player2,STATE_STUNNED)
		StateCheck(Player2,STATE_PANIC)
		StateCheck(Player2,STATE_SLEEPING)
		StateCheck(Player2,STATE_SILENCED)
		StateCheck(Player2,STATE_CHARMED)
		StateCheck(Player2,STATE_SLOWED)
		StateCheck(Player2,STATE_BLIND)
		StateCheck(Player2,STATE_CONFUSED)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	See(Player2)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,WIZARD_TRUE_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player3,0,HELD)
		CheckStatGT(Player3,0,ENTANGLE)
		CheckStatGT(Player3,0,GREASE)
		CheckStatGT(Player3,0,WEB)
		StateCheck(Player3,STATE_HELPLESS)
		StateCheck(Player3,STATE_STUNNED)
		StateCheck(Player3,STATE_PANIC)
		StateCheck(Player3,STATE_SLEEPING)
		StateCheck(Player3,STATE_SILENCED)
		StateCheck(Player3,STATE_CHARMED)
		StateCheck(Player3,STATE_SLOWED)
		StateCheck(Player3,STATE_BLIND)
		StateCheck(Player3,STATE_CONFUSED)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	See(Player3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,WIZARD_TRUE_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player4,0,HELD)
		CheckStatGT(Player4,0,ENTANGLE)
		CheckStatGT(Player4,0,GREASE)
		CheckStatGT(Player4,0,WEB)
		StateCheck(Player4,STATE_HELPLESS)
		StateCheck(Player4,STATE_STUNNED)
		StateCheck(Player4,STATE_PANIC)
		StateCheck(Player4,STATE_SLEEPING)
		StateCheck(Player4,STATE_SILENCED)
		StateCheck(Player4,STATE_CHARMED)
		StateCheck(Player4,STATE_SLOWED)
		StateCheck(Player4,STATE_BLIND)
		StateCheck(Player4,STATE_CONFUSED)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	See(Player4)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,WIZARD_TRUE_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player5,0,HELD)
		CheckStatGT(Player5,0,ENTANGLE)
		CheckStatGT(Player5,0,GREASE)
		CheckStatGT(Player5,0,WEB)
		StateCheck(Player5,STATE_HELPLESS)
		StateCheck(Player5,STATE_STUNNED)
		StateCheck(Player5,STATE_PANIC)
		StateCheck(Player5,STATE_SLEEPING)
		StateCheck(Player5,STATE_SILENCED)
		StateCheck(Player5,STATE_CHARMED)
		StateCheck(Player5,STATE_SLOWED)
		StateCheck(Player5,STATE_BLIND)
		StateCheck(Player5,STATE_CONFUSED)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	See(Player5)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,WIZARD_TRUE_DISPEL_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(13)
		CheckStatGT(Player6,0,HELD)
		CheckStatGT(Player6,0,ENTANGLE)
		CheckStatGT(Player6,0,GREASE)
		CheckStatGT(Player6,0,WEB)
		StateCheck(Player6,STATE_HELPLESS)
		StateCheck(Player6,STATE_STUNNED)
		StateCheck(Player6,STATE_PANIC)
		StateCheck(Player6,STATE_SLEEPING)
		StateCheck(Player6,STATE_SILENCED)
		StateCheck(Player6,STATE_CHARMED)
		StateCheck(Player6,STATE_SLOWED)
		StateCheck(Player6,STATE_BLIND)
		StateCheck(Player6,STATE_CONFUSED)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	See(Player6)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,WIZARD_TRUE_DISPEL_MAGIC)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player1,STATE_PANIC)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
	See(Player1)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player1,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player2,STATE_PANIC)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
	See(Player2)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player2,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player3,STATE_PANIC)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
	See(Player3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player3,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player4,STATE_PANIC)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
	See(Player4)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player4,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player5,STATE_PANIC)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
	See(Player5)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player5,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RESIST_FEAR)
	StateCheck(Player6,STATE_PANIC)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
	See(Player6)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Player6,WIZARD_RESIST_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MIRROR_IMAGE)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!StateCheck(Myself,STATE_MIRRORIMAGE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MIRROR_IMAGE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BLUR)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!StateCheck(Myself,STATE_BLUR)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_BLUR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SHIELD)
	OR(2)
		TookDamage()
		Range(NearestEnemyOf(Myself),8)
	!GlobalTimerNotExpired("GBWizShld","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizShld","LOCALS",FOUR_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SHIELD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PROTECTION_FROM_EVIL)
	OR(3)
		See(NearestEnemyOfType([0.0.DEMONIC]))
		Gender(NearestEnemyOf(Myself),SUMMONED)
		Alignment(NearestEnemyOf(Myself),MASK_EVIL)
	!GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
	!HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
	!HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBProtFromEvil","LOCALS",THREE_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_PROTECTION_FROM_EVIL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GREATER_MALISON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),15,SAVEVSSPELL)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
	!GlobalTimerNotExpired("GBGreaterMalison","LOCALS")
THEN
	RESPONSE #100
		SetGlobalTimer("GBGreaterMalison","LOCALS",TWO_TURNS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_GREATER_MALISON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_WAIL_OF_THE_BANSHEE)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),4)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_WAIL_OF_THE_BANSHEE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_METEOR_SWARM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_METEOR_SWARM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SYMBOL_STUN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SYMBOL_STUN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SYMBOL_FEAR)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DEMONIC)
	!Race(LastSeenBy(Myself),TROLL)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_PANIC)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SYMBOL_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SYMBOL_DEATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	HPLT(LastSeenBy(Myself),60)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SYMBOL_DEATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_INCENDIARY_CLOUD)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_INCENDIARY_CLOUD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_STORM_OF_VENGEANCE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_STORM_OF_VENGEANCE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_COMET)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_COMET)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DRAGONS_BREATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DRAGONS_BREATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_ABI_DALZIMS_HORRID_WILTING)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_ABI_DALZIMS_HORRID_WILTING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPHERE_OF_CHAOS)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	NumCreatureVsPartyGT([EVILCUTOFF],2)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SPHERE_OF_CHAOS)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DELAYED_BLAST_FIREBALL)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DELAYED_BLAST_FIREBALL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DEATH_FOG)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTACID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DEATH_FOG)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CLOUDKILL)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTACID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CLOUDKILL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHAOS)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_PANIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHAOS)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TELEPORT_FIELD)
	See(NearestEnemyOf(Myself))
	NumCreatureVsPartyGT([EVILCUTOFF],2)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_TELEPORT_FIELD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_ICE_STORM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTCOLD)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_ICE_STORM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_EMOTION_HOPELESSNESS)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_EMOTION_HOPELESSNESS)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONFUSION)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CONFUSION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SLOW)
	See(TenthNearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SLOWED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SLOW)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SKULL_TRAP)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SKULL_TRAP)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_REMOVE_MAGIC)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	OR(9)
		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		StateCheck(LastSeenBy(Myself),STATE_CHANT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
		StateCheck(LastSeenBy(Myself),STATE_LUCK)
		StateCheck(LastSeenBy(Myself),STATE_AID)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_REMOVE_MAGIC)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_LIGHTNING_BOLT)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTELECTRICITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_LIGHTNING_BOLT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FIREBALL)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FIREBALL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TRUE_DISPEL_MAGIC)
	OR(4)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	OR(9)
		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		StateCheck(LastSeenBy(Myself),STATE_CHANT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
		StateCheck(LastSeenBy(Myself),STATE_LUCK)
		StateCheck(LastSeenBy(Myself),STATE_AID)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_TRUE_DISPEL_MAGIC)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_WEB)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!Race(LastSeenBy(Myself),SPIDER)
	!Race(LastSeenBy(Myself),ETTERCAP)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),DRAGON)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!CheckStatGT(LastSeenBy(Myself),0,WEB)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_WEB)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_STINKING_CLOUD)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!Race(LastSeenBy(Myself),MEPHIT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_STINKING_CLOUD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HORROR)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_PANIC)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HORROR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GLITTERDUST)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_BLIND)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_GLITTERDUST)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GREASE)
	See(TenthNearestEnemyOf(Myself))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_SLOWED)
	!CheckStatGT(LastSeenBy(Myself),0,GREASE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_GREASE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FIRE_STORM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),15)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_FIRE_STORM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_EARTHQUAKE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Range(LastSeenBy(Myself),15)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_EARTHQUAKE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SYMBOL_STUN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Range(LastSeenBy(Myself),8)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!Race(LastSeenBy(Myself),WYVERN)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SYMBOL_STUN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SYMBOL_FEAR)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Range(LastSeenBy(Myself),8)
	!StateCheck(LastSeenBy(Myself),STATE_PANIC)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SYMBOL_FEAR)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SYMBOL_DEATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	HPLT(LastSeenBy(Myself),60)
	HPGT(Myself,60)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),TROLL)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SYMBOL_DEATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_GREATER_COMMAND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!Race(LastSeenBy(Myself),WYVERN)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_GREATER_COMMAND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_HOLY_SMITE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	Alignment(LastSeenBy(Myself),MASK_EVIL)
	!Alignment(Player1,MASK_EVIL)
	!Alignment(Player2,MASK_EVIL)
	!Alignment(Player3,MASK_EVIL)
	!Alignment(Player4,MASK_EVIL)
	!Alignment(Player5,MASK_EVIL)
	!Alignment(Player6,MASK_EVIL)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_HOLY_SMITE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_UNHOLY_BLIGHT)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	Alignment(LastSeenBy(Myself),MASK_GOOD)
	!Alignment(Player1,MASK_GOOD)
	!Alignment(Player2,MASK_GOOD)
	!Alignment(Player3,MASK_GOOD)
	!Alignment(Player4,MASK_GOOD)
	!Alignment(Player5,MASK_GOOD)
	!Alignment(Player6,MASK_GOOD)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_UNHOLY_BLIGHT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_GLYPH_OF_WARDING)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTELECTRICITY)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!CheckStatLT(LastSeenBy(Myself),10,SAVEVSSPELL)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Range(LastSeenBy(Myself),15)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_GLYPH_OF_WARDING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ENTANGLE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!Range(LastSeenBy(Myself),15)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),RAKSHASA)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ENTANGLE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DOOM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	CheckStatLT(LastSeenBy(Myself),15,SAVEVSSPELL)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_DOOM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SUMMON_DEVA)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreature([GOODCUTOFF.0.SOLAR],0)
	NumCreature([GOODCUTOFF.0.ANTISOLAR],0)
	NumCreature([GOODCUTOFF.0.PLANATAR],0)
	NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SUMMON_DEVA)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SUMMON_FALLEN_DEVA)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreature([GOODCUTOFF.0.SOLAR],0)
	NumCreature([GOODCUTOFF.0.ANTISOLAR],0)
	NumCreature([GOODCUTOFF.0.PLANATAR],0)
	NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_SUMMON_FALLEN_DEVA)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_PLANATAR_GOOD)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreature([GOODCUTOFF.0.SOLAR],0)
	NumCreature([GOODCUTOFF.0.ANTISOLAR],0)
	NumCreature([GOODCUTOFF.0.PLANATAR],0)
	NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_PLANATAR_GOOD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_PLANATAR_EVIL)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreature([GOODCUTOFF.0.SOLAR],0)
	NumCreature([GOODCUTOFF.0.ANTISOLAR],0)
	NumCreature([GOODCUTOFF.0.PLANATAR],0)
	NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_PLANATAR_EVIL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ELEMENTAL_SWARM)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ELEMENTAL_SWARM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_GREATER_ELEMENTAL_SWARM)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_GREATER_ELEMENTAL_SWARM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_GATE)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_GATE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_FIEND)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_FIEND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_EFREET)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_EFREET)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUMMON_DJINNI)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SUMMON_DJINNI)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MORDENKAINENS_SWORD)
	See(NearestEnemyOf(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_MORDENKAINENS_SWORD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CACOFIEND)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CACOFIEND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_WYVERN_CALL)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_WYVERN_CALL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_INVISIBLE_STALKER)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_INVISIBLE_STALKER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_AIR_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_AIR_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_EARTH_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_EARTH_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_FIRE_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_FIRE_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CARRION)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CARRION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MONSTER_SUMMONING_3)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MONSTER_SUMMONING_3)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_LESSER_AIR_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_LESSER_AIR_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_LESSER_EARTH_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_LESSER_EARTH_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONJURE_LESSER_FIRE_ELEMENTAL)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatGT(Myself,0,STONESKINS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_CONJURE_LESSER_FIRE_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_ANIMATE_DEAD)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_ANIMATE_DEAD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPIDER_SPAWN)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SPIDER_SPAWN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MONSTER_SUMMONING_2)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MONSTER_SUMMONING_2)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MONSTER_SUMMONING_1)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MONSTER_SUMMONING_1)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_GATE)
	OR(3)
		GlobalTimerNotExpired("GBProtFromEvil","LOCALS")
		HasItemEquiped("WA2AMU",Myself) // Sensate Amulet
		HasItemEquipedReal("STAF11",Myself) // Staff of the Magi +5
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_GATE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CONJURE_EARTH_ELEMENTAL)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CONJURE_EARTH_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CONJURE_FIRE_ELEMENTAL)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CONJURE_FIRE_ELEMENTAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_AERIAL_SERVANT)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_AERIAL_SERVANT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CONJURE_ANIMALS)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CONJURE_ANIMALS)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ANIMATE_DEAD)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ANIMATE_DEAD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CALL_WOODLAND_BEINGS)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_CALL_WOODLAND_BEINGS)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ANIMAL_SUMMONING_3)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ANIMAL_SUMMONING_3)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ANIMAL_SUMMONING_2)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ANIMAL_SUMMONING_2)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ANIMAL_SUMMONING_1)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ANIMAL_SUMMONING_1)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("MISC3C",Myself) // Efreeti Bottle
	Global("GBUsedMISC3C","LOCALS",0)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("MISC3C",LastSeenBy(Myself)) // Efreeti Bottle
		SetGlobal("GBUsedMISC3C","LOCALS",1)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("MISC3E",Myself) // Black Spider Figurine
	Global("GBUsedMISC3E","LOCALS",0)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("MISC3E",LastSeenBy(Myself)) // Black Spider Figurine
		SetGlobal("GBUsedMISC3E","LOCALS",1)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("MISC3I",Myself) // Silver Horn of Valhalla
	Global("GBUsedMISC3I","LOCALS",0)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("MISC3I",LastSeenBy(Myself)) // Silver Horn of Valhalla
		SetGlobal("GBUsedMISC3I","LOCALS",1)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("MISC3J",Myself) // Bronze Horn of Valhalla
	Global("GBUsedMISC3J","LOCALS",0)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("MISC3J",LastSeenBy(Myself)) // Bronze Horn of Valhalla
		SetGlobal("GBUsedMISC3J","LOCALS",1)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("MISC3K",Myself) // Iron Horn of Valhalla
	Global("GBUsedMISC3K","LOCALS",0)
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("MISC3K",LastSeenBy(Myself)) // Iron Horn of Valhalla
		SetGlobal("GBUsedMISC3K","LOCALS",1)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("WAND10",Myself) // Wand of Monster Summoning
	OR(5)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.DRUID_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],3)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("WAND10",LastSeenBy(Myself)) // Wand of Monster Summoning
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
	RESPONSE #25
		Continue()
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_IMPLOSION)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_IMPLOSION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BIGBYS_CRUSHING_HAND)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BIGBYS_CRUSHING_HAND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BIGBYS_CLENCHED_FIST)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BIGBYS_CLENCHED_FIST)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_KILL)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!HPGT(LastSeenBy(Myself),60)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_KILL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_BLIND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_BLIND)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_BLIND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_STUN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
	HPLT(LastSeenBy(Myself),90)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_STUN)
END

IF Global("EdBattlIt","LOCALS",1)
	HasItemEquiped("WAND04",Myself) // Wand of Paralyzation
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
THEN
	RESPONSE #100
		SetInterrupt(FALSE)
		UseItem("WAND04",LastSeenBy(Myself)) // Wand of Paralyzation
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
	RESPONSE #25
		Continue()
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FINGER_OF_DEATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FINGER_OF_DEATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FLESH_TO_STONE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FLESH_TO_STONE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DISINTEGRATE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Race(LastSeenBy(Myself),LICH)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DISINTEGRATE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHAIN_LIGHTNING)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTELECTRICITY)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHAIN_LIGHTNING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HOLD_MONSTER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HOLD_MONSTER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FEEBLEMIND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FEEBLEMIND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DOMINATION)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!Race(LastSeenBy(Myself),DRAGON)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DOMINATION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POLYMORPH_OTHER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!CheckStatGT(LastSeenBy(Myself),0,POLYMORPHED)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POLYMORPH_OTHER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_OTILUKES_RESILIENT_SPHERE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	HPPercentGT(LastSeenBy(Myself),50)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_OTILUKES_RESILIENT_SPHERE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONTAGION)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	OR(3)
		CheckStatGT(LastSeenBy(Myself),16,STR)
		CheckStatGT(LastSeenBy(Myself),16,DEX)
		StateCheck(LastSeenBy(Myself),STATE_HASTED)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CONTAGION)
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_ENERGY_BLADES)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),25,RESISTELECTRICITY)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_ENERGY_BLADES)
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_MELF_METEOR)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_MELF_METEOR)
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HOLD_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HOLD_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FLAME_ARROW)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FLAME_ARROW)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DIRE_CHARM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DIRE_CHARM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RAY_OF_ENFEEBLEMENT)
	See(NearestEnemyOf(Myself))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatLT(LastSeenBy(Myself),17,STR)
	General(LastSeenBy(Myself),HUMANOID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_RAY_OF_ENFEEBLEMENT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_SLEEP)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	HPLT(LastSeenBy(Myself),20)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_SLEEP)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SLEEP)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	CheckStatLT(LastSeenBy(Myself),4,LEVEL)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SLEEP)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MELF_ACID_ARROW)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTACID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MELF_ACID_ARROW)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_AGANNAZAR_SCORCHER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_AGANNAZAR_SCORCHER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPOOK)
	See(NearestEnemyOf(Myself))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatLT(LastSeenBy(Myself),3,INT)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SPOOK)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MAGIC_MISSILE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MAGIC_MISSILE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_LARLOCH_MINOR_DRAIN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_LARLOCH_MINOR_DRAIN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHROMATIC_ORB)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHROMATIC_ORB)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHARM_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHARM_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_BOLT_OF_GLORY)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_BOLT_OF_GLORY)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FINGER_OF_DEATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),TROLL)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_FINGER_OF_DEATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_FLAME_STRIKE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_FLAME_STRIKE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CALL_LIGHTNING)
	AreaType(OUTDOOR)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTELECTRICITY)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CALL_LIGHTNING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CONFUSION)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CONFUSION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_RIGID_THINKING)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_RIGID_THINKING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DOLOROUS_DECAY)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	Range(LastSeenBy(Myself),12)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_DOLOROUS_DECAY)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_ENERGY_DRAIN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	Range(LastSeenBy(Myself),12)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_ENERGY_DRAIN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_POISON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	Range(LastSeenBy(Myself),12)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_POISON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_MENTAL_DOMINATION)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!Race(LastSeenBy(Myself),WYVERN)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_MENTAL_DOMINATION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_HOLD_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	General(LastSeenBy(Myself),HUMANOID)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_HOLD_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_HOLD_ANIMAL)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	General(LastSeenBy(Myself),ANIMAL)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_HOLD_ANIMAL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_COMMAND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!Race(LastSeenBy(Myself),MEPHIT)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_COMMAND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CHARM_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	General(LastSeenBy(Myself),HUMANOID)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_CHARM_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_SOL_SEARING_ORB)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,CLERIC_SOL_SEARING_ORB)
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_KILL)
	See(NearestEnemyOf(Myself))
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!HPGT(LastSeenBy(Myself),60)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_KILL)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_BLIND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_BLIND)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_BLIND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_STUN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
	HPLT(LastSeenBy(Myself),90)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_STUN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FINGER_OF_DEATH)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FINGER_OF_DEATH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FLESH_TO_STONE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FLESH_TO_STONE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DISINTEGRATE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!Race(LastSeenBy(Myself),LICH)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DISINTEGRATE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHAIN_LIGHTNING)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTELECTRICITY)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHAIN_LIGHTNING)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HOLD_MONSTER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HOLD_MONSTER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FEEBLEMIND)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FEEBLEMIND)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DOMINATION)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!Race(LastSeenBy(Myself),DRAGON)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DOMINATION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POLYMORPH_OTHER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!CheckStatGT(LastSeenBy(Myself),0,POLYMORPHED)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POLYMORPH_OTHER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_OTILUKES_RESILIENT_SPHERE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	HPPercentGT(LastSeenBy(Myself),50)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_OTILUKES_RESILIENT_SPHERE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONTAGION)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	OR(3)
		CheckStatGT(LastSeenBy(Myself),16,STR)
		CheckStatGT(LastSeenBy(Myself),16,DEX)
		StateCheck(LastSeenBy(Myself),STATE_HASTED)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CONTAGION)
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_MELF_METEOR)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_MELF_METEOR)
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_HOLD_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_HOLD_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_FLAME_ARROW)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_FLAME_ARROW)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_DIRE_CHARM)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_DIRE_CHARM)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_RAY_OF_ENFEEBLEMENT)
	See(NearestEnemyOf(Myself))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatLT(LastSeenBy(Myself),17,STR)
	General(LastSeenBy(Myself),HUMANOID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_RAY_OF_ENFEEBLEMENT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POWER_WORD_SLEEP)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	HPLT(LastSeenBy(Myself),20)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_POWER_WORD_SLEEP)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SLEEP)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatLT(LastSeenBy(Myself),4,LEVEL)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SLEEP)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MELF_ACID_ARROW)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTACID)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MELF_ACID_ARROW)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_AGANNAZAR_SCORCHER)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_AGANNAZAR_SCORCHER)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SPOOK)
	See(NearestEnemyOf(Myself))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatLT(LastSeenBy(Myself),3,INT)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_SPOOK)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MAGIC_MISSILE)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MAGIC_MISSILE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_LARLOCH_MINOR_DRAIN)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_LARLOCH_MINOR_DRAIN)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHROMATIC_ORB)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHROMATIC_ORB)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CHARM_PERSON)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	General(LastSeenBy(Myself),HUMANOID)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CHARM_PERSON)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPRISONMENT)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_IMPRISONMENT)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SHAPECHANGE)
	See(NearestEnemyOf(Myself))
	CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SHAPECHANGE)
		UnhideGUI()
		PauseGame()
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_POLYMORPH_SELF)
	See(NearestEnemyOf(Myself))
	CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_POLYMORPH_SELF)
		UnhideGUI()
		PauseGame()
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_ENERGY_DRAIN)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_ENERGY_DRAIN)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_BLACK_BLADE_OF_DISASTER)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_BLACK_BLADE_OF_DISASTER)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_MAZE)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_MAZE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_PRISMATIC_SPRAY)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_PRISMATIC_SPRAY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_HASTE)
	See(NearestEnemyOf(Myself))
	See(Player1)
	!CheckStatGT(LastSeenBy(Myself),0,IMPROVEDHASTE)
	!HasItemEquiped("ring09",LastSeenBy(Myself)) // Ring of Free Action
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_IMPROVED_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_HASTE)
	See(NearestEnemyOf(Myself))
	See(Player2)
	!CheckStatGT(LastSeenBy(Myself),0,IMPROVEDHASTE)
	!HasItemEquiped("ring09",LastSeenBy(Myself)) // Ring of Free Action
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_IMPROVED_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_HASTE)
	See(NearestEnemyOf(Myself))
	See(Player3)
	!CheckStatGT(LastSeenBy(Myself),0,IMPROVEDHASTE)
	!HasItemEquiped("ring09",LastSeenBy(Myself)) // Ring of Free Action
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_IMPROVED_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_HASTE)
	See(NearestEnemyOf(Myself))
	See(StrongestOf(Myself))
	!HasItemEquiped("ring09",LastSeenBy(Myself)) // Ring of Free Action
	!CheckStatGT(LastSeenBy(Myself),0,IMPROVEDHASTE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_IMPROVED_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_IMPROVED_HASTE)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(Myself,0,IMPROVEDHASTE)
	!HasItemEquiped("ring09",Myself) // Ring of Free Action
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_IMPROVED_HASTE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_SUN_FIRE)
	See(NearestEnemyOf(Myself))
	Range(Nearest([PC]),8)
	!Range(WeakestOf(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_SUN_FIRE)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_PHANTOM_BLADE)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	OR(2)
		General(LastSeenBy(Myself),UNDEAD)
		CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_PHANTOM_BLADE)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_CONE_OF_COLD)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTCOLD)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_CONE_OF_COLD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_VAMPIRIC_TOUCH)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBWizVampToch","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizVampToch","LOCALS",ONE_HOUR)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_VAMPIRIC_TOUCH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_STRENGTH)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	CheckStatLT(Myself,19,STR)
	CheckStatLT(Myself,50,STREXTRA)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_STRENGTH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_GHOUL_TOUCH)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_GHOUL_TOUCH)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_SHOCKING_GRASP)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),25,RESISTELECTRICITY)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_SHOCKING_GRASP)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_COLOR_SPRAY)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_COLOR_SPRAY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(WIZARD_CHILL_TOUCH)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!Race(LastSeenBy(Myself),WYVERN)
	!Race(LastSeenBy(Myself),KUO-TOA)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!StateCheck(LastSeenBy(Myself),STATE_FEEBLEMINDED)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,WIZARD_CHILL_TOUCH)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_BURNING_HANDS)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!CheckStatGT(LastSeenBy(Myself),25,RESISTFIRE)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),WIZARD_BURNING_HANDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_NATURE_BEAUTY)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),12)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_NATURE_BEAUTY)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_HOLY_WORD)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Alignment(LastSeenBy(Myself),MASK_EVIL)
	!Alignment(Player1,MASK_EVIL)
	!Alignment(Player2,MASK_EVIL)
	!Alignment(Player3,MASK_EVIL)
	!Alignment(Player4,MASK_EVIL)
	!Alignment(Player5,MASK_EVIL)
	!Alignment(Player6,MASK_EVIL)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_HOLY_WORD)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_UNHOLY_WORD)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Alignment(LastSeenBy(Myself),MASK_GOOD)
	!Alignment(Player1,MASK_GOOD)
	!Alignment(Player2,MASK_GOOD)
	!Alignment(Player3,MASK_GOOD)
	!Alignment(Player4,MASK_GOOD)
	!Alignment(Player5,MASK_GOOD)
	!Alignment(Player6,MASK_GOOD)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),CLERIC_UNHOLY_WORD)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_RIGHTEOUS_MAGIC)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!GlobalTimerNotExpired("GBClrRightMag","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrRightMag","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_RIGHTEOUS_MAGIC)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_CHAMPIONS_STRENGTH)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!GlobalTimerNotExpired("GBClrChampStr","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrChampStr","LOCALS",ONE_HOUR)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_CHAMPIONS_STRENGTH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_DRAW_UPON_HOLY_MIGHT)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!GlobalTimerNotExpired("GBClrDUHM","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrDUHM","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_DRAW_UPON_HOLY_MIGHT)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_HOLY_POWER)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!GlobalTimerNotExpired("GBClrHolyPow","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrHolyPow","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_HOLY_POWER)
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_HARM)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,CLERIC_HARM)
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_SLAY_LIVING)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),TROLL)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,CLERIC_SLAY_LIVING)
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_CAUSE_CRITICAL_WOUNDS)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,CLERIC_CAUSE_CRITICAL_WOUNDS)
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_CAUSE_SERIOUS_WOUNDS)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		Spell(Myself,CLERIC_CAUSE_SERIOUS_WOUNDS)
		Attack(LastSeenBy(Myself))
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_SPIRITUAL_HAMMER)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_SPIRITUAL_HAMMER)
END

IF Global("EdBattlIt","LOCALS",1)
	CheckStatGT(Myself,0,NUMBEROFATTACKS)
	HaveSpell(CLERIC_FLAME_BLADE)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_FLAME_BLADE)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(CLERIC_SHILLELAGH)
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Range(LastSeenBy(Myself),8)
	!HasItemSlot(Myself,SLOT_MISC19)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,CLERIC_SHILLELAGH)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WIZARD_TENSERS_TRANSFORMATION)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	OR(2)
		CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
		HPPercentGT(Myself,50)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WIZARD_TENSERS_TRANSFORMATION)
END

IF Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_WHIRLWIND)
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBWhirlwind","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWhirlwind","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_WHIRLWIND)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_GREATER_WHIRLWIND)
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBWhirlwind","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWhirlwind","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_GREATER_WHIRLWIND)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_DEATHBLOW)
	NumCreatureVsPartyGT([EVILCUTOFF],4)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),8,LEVEL)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBDeathblow","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBDeathblow","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_DEATHBLOW)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_GREATER_DEATHBLOW)
	NumCreatureVsPartyGT([EVILCUTOFF],4)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),12,LEVEL)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBGrtDeathblow","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBGrtDeathblow","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_GREATER_DEATHBLOW)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_RESIST_MAGIC)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	CheckStatLT(Myself,50,RESISTMAGIC)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_RESIST_MAGIC)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_CRITICAL_STRIKE)
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBCritStrike","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBCritStrike","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_CRITICAL_STRIKE)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_POWER_ATTACK)
	See(NearestEnemyOf(Myself))
	!HasBounceEffects(LastSeenBy(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!GlobalTimerNotExpired("GBPowerAttack","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBPowerAttack","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_POWER_ATTACK)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_HARDINESS)
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBHardiness","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHardiness","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_HARDINESS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_WAR_CRY)
	NumCreatureVsPartyGT([EVILCUTOFF],4)
	See(NearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_STUNNED)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),BEHOLDER)
	!GlobalTimerNotExpired("GBWarCry","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWarCry","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_WAR_CRY)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(WARRIOR_SMITE)
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBWarSmite","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWarSmite","LOCALS",THREE_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,WARRIOR_SMITE)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HPPercentLT(Myself,75)
	HaveSpellRES("spin101") // Leichte Wunden heilen
	!HasBounceEffects(Myself)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin101",Myself) // Leichte Wunden heilen
END

IF 
Global("EdBattlIt","LOCALS",1)
	StateCheck(Myself,STATE_POISONED)
	HaveSpellRES("spin102") // GIF Global("EdBattlIt","LOCALS",1)t verlangsamen
	!HasBounceEffects(Myself)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin102",Myself) // GIF Global("EdBattlIt","LOCALS",1)t verlangsamen
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpellRES("spin103") // Heilige Macht entlehnen
	See(NearestEnemyOf(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!Range(LastAttackerOf(Myself),8)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	!GlobalTimerNotExpired("GBClrDUHM","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBClrDUHM","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin103",Myself) // Heilige Macht entlehnen
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpellRES("spin104") // Entzug von Lebenskraft
	See(TenthNearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin104",LastSeenBy(Myself)) // Entzug von Lebenskraft
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpellRES("spin105") // Schrecken
	See(TenthNearestEnemyOf(Myself))
	!CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
	!HasItemEquiped("lich",LastSeenBy(Myself)) // No such index
	!HasItemEquiped("rakring",LastSeenBy(Myself)) // No such index
	!General(LastSeenBy(Myself),UNDEAD)
	!Race(LastSeenBy(Myself),SLIME)
	!Race(LastSeenBy(Myself),DRAGON)
	!Race(LastSeenBy(Myself),TROLL)
	!Race(LastSeenBy(Myself),RAKSHASA)
	!Race(LastSeenBy(Myself),DEMONIC)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!StateCheck(LastSeenBy(Myself),STATE_PANIC)
	!StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin105",LastSeenBy(Myself)) // Schrecken
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpellRES("spin106") // VampirgrIF Global("EdBattlIt","LOCALS",1)f
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!HasBounceEffects(LastSeenBy(Myself))
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
	!GlobalTimerNotExpired("GBWizVampToch","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBWizVampToch","LOCALS",ONE_HOUR)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		SpellRES("spin106",LastSeenBy(Myself)) // VampirgrIF Global("EdBattlIt","LOCALS",1)f
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ROGUE_EVASION)
	TookDamage()
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBEvasion","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBEvasion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ROGUE_EVASION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ROGUE_GREATER_EVASION)
	TookDamage()
	See(NearestEnemyOf(Myself))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBEvasion","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBEvasion","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ROGUE_GREATER_EVASION)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ROGUE_ASSASINATION)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBAssassination","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBAssassination","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ROGUE_ASSASINATION)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ROGUE_AVOID_DEATH)
	OR(2)
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBAvoidDeath","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBAvoidDeath","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ROGUE_AVOID_DEATH)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(BARBARIAN_RAGE)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBBarbRage","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBBarbRage","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,BARBARIAN_RAGE)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(BERSERKER_RAGE)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBBarbRage","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBBarbRage","LOCALS",EIGHTEEN_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,BERSERKER_RAGE)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(KENSAI_KIA)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBKensaiKia","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBKensaiKia","LOCALS",TWELVE_MINUTES)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,KENSAI_KIA)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ASSASSIN_POISON)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ASSASSIN_POISON)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(ARCHER_CALL_SHOT)
	OR(3)
		See(TenthNearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	!GlobalTimerNotExpired("GBArcherShot","LOCALS")
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBArcherShot","LOCALS",TWO_ROUNDS)
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,ARCHER_CALL_SHOT)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(MINSC_BERSERK)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Range(LastSeenBy(Myself),8)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,MINSC_BERSERK)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(RANGER_CHARM_ANIMAL)
	See(NearestEnemyOf(Myself))
	General(LastSeenBy(Myself),ANIMAL)
	NumCreatureVsPartyGT([EVILCUTOFF],3)
	Range(LastSeenBy(Myself),8)
	!StateCheck(LastSeenBy(Myself),STATE_CHARMED)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(LastSeenBy(Myself),RANGER_CHARM_ANIMAL)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(MONK_STUNNING_BLOW)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	Range(LastSeenBy(Myself),8)
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,MONK_STUNNING_BLOW)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(MONK_QUIVERING_PALM)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(NearestEnemyOfType([0.0.0.LONG_BOW]))
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,MONK_QUIVERING_PALM)
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(MONK_LAY_ON_HANDS)
	HPPercentLT(Myself,75)
	See(NearestEnemyOf(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,MONK_LAY_ON_HANDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	HaveSpell(PALADIN_LAY_ON_HANDS)
	HPPercentLT(Myself,75)
	See(NearestEnemyOf(Myself))
	CheckStatLT(Myself,36,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("GBHalf","LOCALS",ONE_ROUND)
		Spell(Myself,PALADIN_LAY_ON_HANDS)
END

IF 
Global("EdBattlIt","LOCALS",1)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	Global("GBAmmoless","LOCALS",0)
	!HasItemSlot(Myself,SLOT_MISC19)
	HasItemSlot(Myself,SLOT_WEAPON)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		SelectWeaponAbility(SLOT_WEAPON,0)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	See(NearestEnemyOf(Myself))
	Range(LastSeenBy(Myself),8)
	OR(3)
		!HasItemSlot(Myself,SLOT_WEAPON)
		HasItemSlot(Myself,SLOT_MISC19)
		Global("GBAmmoless","LOCALS",1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		EquipMostDamagingMelee()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!Range(LastAttackerOf(Myself),8)
	Global("GBAmmoless","LOCALS",0)
	!HasItemSlot(Myself,SLOT_MISC19)
	HasItemSlot(Myself,SLOT_WEAPON1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		SelectWeaponAbility(SLOT_WEAPON1,0)
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	OR(3)
		See(NearestEnemyOf(Myself))
		See(TenthNearestEnemyOfType([0.0.0.CLERIC_ALL]))
		See(TenthNearestEnemyOfType([0.0.0.LONG_BOW]))
	!Range(LastSeenBy(Myself),8)
	!Range(LastAttackerOf(Myself),8)
	OR(3)
		!HasItemSlot(Myself,SLOT_WEAPON1)
		HasItemSlot(Myself,SLOT_MISC19)
		Global("GBAmmoless","LOCALS",1)
	!GlobalTimerNotExpired("GBWizAlacrity","LOCALS")
	!InParty(LastSeenBy(Myself))
	!Class(LastSeenBy(Myself),INNOCENT)
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
THEN
	RESPONSE #100
		EquipRanged()
		Attack(LastSeenBy(Myself))
END

IF 
Global("EdBattlIt","LOCALS",1)
	See([GOODBUTRED.MONSTER.DEMONIC.TANARI.0.SUMMONED_DEMON])
	AttackedBy(LastSeenBy(Myself),DEFAULT)
THEN
	RESPONSE #100
		ChangeEnemyAlly(LastSeenBy(Myself),ENEMY)
END

